<div class="card">
    <h3 class="card-header text-center bg-grey">Relationships</h3>
    <div class="card-body">
            <table class="table table-bordered table-hover" id="relationship_table" data-ajax="{% url 'api:relationship-list' %}?relations={{ view.kwargs.pk }}&expand=person_one,person_two&format=datatables&keep=person_one,person_two" data-table-length="10">
                <thead>
                    <th>Relation</th>
                    <th>Relationship</th>
                    <th>Definitive</th>
                </thead>
    </div>
</div>

<script>

    var url = window.location.pathname;
    var person = url.split('/').reverse()[1];

    var relationship_table = $('#relationship_table').DataTable({
        serverSide: true,
        columns: [
            {data: 'person_one',
                defaultContent: '',
                name: 'person_one.first_name, person_one.relation_name, person_one.last_name, person_two.first_name, person_two.relation_name, person_two.last_name',
                orderable: false,
                render: {
                    display: function (data, type, row) {
                        if (row.person_one.id == person) {
                            var url = Urls['person:detail'](row.person_two.id);
                            return "<a href='" + url + "'>" + row.person_two.full_name + "</a>";
                        } else {
                            var url = Urls['person:detail'](row.person_one.id);
                            return "<a href='" + url + "'>" + row.person_one.full_name + "</a>";
                        }
                    },
                },
            },
            {data: 'relationship.relation',
                name: 'relationship.relation',
            },
            {data: 'definitive',
                searchable: false,
                orderable: false,
                render: {
                    display: checkMaker
                    }
            },
        ]
    });
</script>